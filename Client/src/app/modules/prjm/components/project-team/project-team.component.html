<app-project-side-nav></app-project-side-nav>
<app-project-nav></app-project-nav>

<section class="content">
  <div class="container-fluid">
    <div class="row">

      <div class="col-lg-9 col-md-9 col-sm-9">
          <div class="card">
            <div class="header bg-green">Members</div>
            <div class="body">
              <div class="row" *ngIf="Members">

                  <div class="col-lg-4 col-md-4 col-sm-6 col-xs-12" *ngFor="let mem of convertKey(Members['members'])">
                      <div class="card">
                          <div class="header bg-green">
                              <h2>
                                  <h1>{{ Members['members'][mem]['user']['loginDetails']['username'] }} </h1><small>{{Members['members'][mem]['user']['loginDetails']['email']}}</small>
                              </h2>
                              <ul class="header-dropdown m-r--5">
                                  <li class="dropdown">
                                      <a href="javascript:void(0);" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
                                          <i class="mdi mdi-arrow-down" style="color: white"></i>
                                      </a>
                                      <ul class="dropdown-menu pull-right">
                                          <li><a  (click)="viewProfile(Members['members'][mem]['user'])" data-toggle="modal" data-target="#ProfileView">View Profile</a></li>
                                          <li><a href="javascript:void(0);">Message</a></li> 
                                          <li><a *ngIf= "checkRole(Members['members'])" (click)="kickMember(Members['members'][mem]['user']['_id'])">Kick from the Project Team</a></li>
                                      </ul>
                                  </li>
                              </ul>
                          </div>
                          <div class="body">
                              Quis pharetra a pharetra fames blandit. Risus faucibus velit Risus imperdiet mattis neque volutpat, etiam lacinia netus dictum magnis per facilisi sociosqu. Volutpat. Ridiculus nostra.
                          </div>
                      </div>
                  </div>

              </div>
            </div>
          </div>
      </div>

      <div class="col-lg-3 col-md-3 col-sm-3">
        <div class="card">
          <div class="header bg-green">Controls</div>
          <div class="body">
            <form (submit) = "addMember()">

                <div class="form-group">

                    <label class="control-label">Username</label>
                    <div class="form-line">
                        <input class="form-control" type="text" [(ngModel)] = "Member_ID" name="Member_ID" required/>
                    </div>
                
                </div>
  
    
              <button class="btn btn-primary waves-effect" type="submit">Add new Team member</button>
            </form>
          </div>
        </div>
      </div>

      <div class="col-lg-3 col-md-3 col-sm-3">
        <div class="card">
          <div class="header bg-green">Possible Users to Join</div>
          <div class="body">
            <ul class="list-group">
              <li class="list-group-item" *ngFor="let u of convertKey(POS)">
                <h4 class="list-group-item-heading">Username: {{POS[u]['loginDetails']['username']}}</h4>
              </li>
            </ul>
          </div>
        </div>
      </div>

    </div>
  </div>
</section>


<!-- Modal -->
<div class="modal fade" id="ProfileView" role="dialog">
    <div class="modal-dialog">
    
      <!-- Modal content-->
      <div class="modal-content modal-col-green">
        <div class="modal-header text-center">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h2 class="modal-title" *ngIf="vProfile">
            <img src="../assets/uploads/avatars/{{vProfile['userDetails']['picture']}}" class="img-rounded img-responsive" style="width: 50%" />
            <h1>{{vProfile['userDetails']['lastname']}}, {{vProfile['userDetails']['firstname']}}</h1>
          </h2>
        </div>
        <div class="modal-body">

        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>
      
    </div>
  </div>
